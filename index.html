<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Secure Access</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
/* YOUR EXACT SAME CSS â€” UNTOUCHED */
*{margin:0;padding:0;box-sizing:border-box;font-family:"Inter",sans-serif;}
body{background:linear-gradient(135deg,#00170b,#000);min-height:100vh;display:flex;justify-content:center;align-items:center;overflow:hidden}
.particles{position:fixed;width:100%;height:100%;pointer-events:none;z-index:0;}
.particles span{position:absolute;width:4px;height:4px;background:#00ff6a;border-radius:50%;opacity:.4;animation:floatUp linear infinite}
@keyframes floatUp{0%{transform:translateY(60vh);opacity:0}50%{opacity:1}100%{transform:translateY(-60vh);opacity:0}}
.container{width:100%;max-width:400px;padding:35px;background:rgba(0,0,0,.55);border:1px solid rgba(0,255,100,.3);border-radius:18px;backdrop-filter:blur(10px);box-shadow:0 0 35px rgba(0,255,130,.25);animation:fadeIn 1s ease-out,pulseGlow 3s infinite ease-in-out;z-index:5}
@keyframes pulseGlow{0%{box-shadow:0 0 25px rgba(0,255,120,.2)}50%{box-shadow:0 0 55px rgba(0,255,120,.6)}100%{box-shadow:0 0 25px rgba(0,255,120,.2)}}
@keyframes fadeIn{from{transform:scale(.93);opacity:0}to{transform:scale(1);opacity:1}}
.heading{text-align:center;color:#00ff99;font-size:30px;font-weight:700;letter-spacing:2px;margin-bottom:30px;position:relative;overflow:hidden;animation:glowText 2s infinite alternate ease-in-out}
@keyframes glowText{0%{text-shadow:0 0 10px #00ff9d}50%{text-shadow:0 0 25px #00ffb3}100%{text-shadow:0 0 10px #00ff9d}}
.heading::after{content:"";position:absolute;top:0;left:-100%;height:100%;width:60%;background:linear-gradient(120deg,transparent,rgba(255,255,255,.3),transparent);animation:shine 2.5s infinite}
@keyframes shine{0%{left:-100%}100%{left:150%}}
.input-box{display:flex;align-items:center;padding:14px;background:rgba(255,255,255,.07);border:1px solid rgba(0,255,130,.45);border-radius:12px;margin-bottom:15px;}
.input-box i{color:#6aff9a;margin-right:10px;font-size:18px}
.input-box input{width:100%;background:transparent;border:none;outline:none;color:#d5ffe9;font-size:15px}
.toggle-eye{cursor:pointer}
.btn{width:100%;padding:15px;background:#0a1f14;color:white;font-size:15px;font-weight:600;border-radius:12px;border:1px solid rgba(0,255,130,.7);cursor:pointer;letter-spacing:2px;transition:.25s;}
.btn:hover{background:#0f5c2d;transform:translateY(-3px)}

/* Message box */
.msg {
    margin-top: 10px;
    color: #ff6b6b;
    font-size: 14px;
    text-align: center;
    min-height: 20px;
}
</style>
</head>

<body>

<div class="particles" id="particles"></div>

<div class="container">
    <div class="heading">ZERO TRACE</div>

    <div class="input-box">
        <i class="fa-solid fa-lock"></i>
        <input type="password" id="passInput" placeholder="ENTER PASSWORD">
        <i class="fa-solid fa-eye toggle-eye" id="eyeToggle"></i>
    </div>

    <button class="btn" onclick="login()">
        <i class="fa-solid fa-shield-halved"></i> VERIFY ACCESS
    </button>

    <div id="msg" class="msg"></div>
</div>

<script>
// Particles
for (let i = 0; i < 40; i++) {
    let p = document.createElement("span");
    p.style.left = Math.random() * 100 + "%";
    p.style.animationDuration = 3.5 + Math.random() * 4 + "s";
    p.style.opacity = Math.random();
    document.getElementById("particles").appendChild(p);
}

// Eye Toggle
const eye = document.getElementById("eyeToggle");
const pass = document.getElementById("passInput");
const msg = document.getElementById("msg");

eye.onclick = () => {
    pass.type = pass.type === "password" ? "text" : "password";
    eye.classList.toggle("fa-eye");
    eye.classList.toggle("fa-eye-slash");
};

// Login Function
async function login() {
    msg.style.color = "#ff6b6b"; // red default

    const password = pass.value.trim();
    if (!password) {
        msg.textContent = "Please enter password.";
        return;
    }

    try {
        const res = await fetch("https://backend-1-qcsu.onrender.com/api/auth/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ password }),
        });

        const data = await res.json();

        if (data.success) {
            msg.style.color = "#00ff9d";
            msg.textContent = "Access Granted... Redirecting";

            setTimeout(() => {
                window.location.href = "devices.html";
            }, 500);
        } else {
            msg.textContent = data.message;
        }

    } catch (err) {
        msg.textContent = "Unable to connect to server.";
    }
}
</script>
</body>
</html>
